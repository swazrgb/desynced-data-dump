<!DOCTYPE html>
<html>
<head>
<title>Desynced JavaScript Utilities</title>
<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link rel="icon" href="//www.desyncedgame.com/desynced.ico">
<style>
body { background-color: #111827; color: white; font-family: sans-serif; margin: 0 }
h1, h2, p { text-align: center; margin: 15pt }
table { border-collapse: collapse; margin:auto }
td, th { border:1px solid black; padding: 4pt; word-wrap: break-word; }
th { background-color: #303946 }
td { background-color: #1f2937 }
a { color: #83acf2; text-decoration: none }
a:hover { color: #f26c43 }
</style>
</head>
<body>
<h1>Desynced Data Dump Decoder</h1>
<p>Decodes data exported by the Desynced Data Dump mod. Install the <a href="https://steamcommunity.com/sharedfiles/filedetails/?id=3174494666">Data Dump</a> mod, click the Copy button, then paste the result here.</p>

<table style="margin-bottom:10pt">
<tr><th style="padding:6pt">Data String</th></tr>
<tr><td style="padding:6pt"><textarea type="text" id="inp" rows=5 cols=120></textarea></td></tr>
<tr><th style="padding:6pt">Convert to JSON</th></tr>
<tr><td style="padding:6pt"><button style="width:100%;height:4em" onclick="run();">Convert to JSON</button></td></tr>
<tr><th style="padding:6pt">Output</th></tr>
<tr><td style="padding:6pt"><textarea type="text" id="outp" rows=24 cols=120 readonly></textarea></td></tr>
</table>

<script src="dsconvert.js" type="text/javascript"></script>
<script type="text/javascript">
function run()
{
	var str = document.getElementById('inp').value, jsonobj;
	try { jsonobj = JSON.parse(str); } catch { }
	try
	{
		var info = {}, obj = DesyncedStringToObject(str, info);
		if (obj.length !== 1 || obj[0].op !== "wait" || !obj[0].cmt) {
			document.getElementById('outp').value = "ERROR: Does not look like Data Dump string";
		} else {
			var data = JSON.parse(obj[0].cmt);
			document.getElementById('outp').value = JSON.stringify(data, null, 4);
		}
	}
	catch (e)
	{
		document.getElementById('outp').value = "ERROR: " + e.message;
	}
}
</script>
</body>
</html>
